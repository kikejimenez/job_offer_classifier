---

title: Pipeline 

keywords: fastai
sidebar: home_sidebar

summary: "The pipeline of text binary classifier for job offer email responses "
description: "The pipeline of text binary classifier for job offer email responses "
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/01_pipeline_classifier.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The dataset of email responses is loaded from a csv file. The data is classified as 'positive' or 'negative' using Tensorflow <code>tf.estimator</code> module.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Data-Processing">Data Processing<a class="anchor-link" href="#Data-Processing"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We have three steps in the data processing pipeline:</p>
<ul>
<li>load data --&gt;  train-test split  --&gt;  TF input functions</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The loading and train-test split is done using the Pandas library. The conversion from a dataframe to a TF function is  necessary.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="load_and_split_data" class="doc_header"><code>load_and_split_data</code><a href="https://github.com/kikejimenez/job_offer_classifier/tree/master/job_offer_classifier/pipeline_classifier.py#L20" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>load_and_split_data</code>(<strong><code>src_file</code></strong>, <strong><code>frac</code></strong>=<em><code>0.85</code></em>, <strong><code>random_state</code></strong>=<em><code>None</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The Tensorflow input functions for train, test and example datasets are created with the help of v1 tf.estimator library</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="tf_input_fn" class="doc_header"><code>tf_input_fn</code><a href="https://github.com/kikejimenez/job_offer_classifier/tree/master/job_offer_classifier/pipeline_classifier.py#L30" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>tf_input_fn</code>(<strong><code>df</code></strong>, <strong><code>shuffle</code></strong>=<em><code>False</code></em>, <strong>**<code>args</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="train_input_fs" class="doc_header"><code>train_input_fs</code><a href="https://github.com/kikejimenez/job_offer_classifier/tree/master/job_offer_classifier/pipeline_classifier.py#L35" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>train_input_fs</code>(<strong>**<code>args</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="predict_input_fs" class="doc_header"><code>predict_input_fs</code><a href="https://github.com/kikejimenez/job_offer_classifier/tree/master/job_offer_classifier/pipeline_classifier.py#L41" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>predict_input_fs</code>(<strong>**<code>args</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Load and split the dataset</strong></p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dat</span><span class="p">,</span> <span class="n">dfs</span> <span class="o">=</span> <span class="n">load_and_split_data</span><span class="p">(</span><span class="n">src_file</span><span class="o">=</span><span class="s1">&#39;../data/interim/payloads.csv&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Percentage of the positive and negative sentiments</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">=</span><span class="n">dat</span>
<span class="s1">&#39;sentiment: {pos: </span><span class="si">%s</span><span class="s1">, neg: </span><span class="si">%s</span><span class="s1">}&#39;</span> <span class="o">%</span> <span class="p">((</span><span class="n">df</span><span class="o">.</span><span class="n">sentiment</span> <span class="o">==</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">/</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">sentiment</span> <span class="o">==</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">/</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;sentiment: {pos: 0.20110192837465565, neg: 0.7988980716253443}&#39;</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Sample of the train dataset</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dfs</span><span class="p">[</span><span class="s1">&#39;train&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>payload</th>
      <th>sentiment</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>104</th>
      <td>first, i want to thank you for the offer to wo...</td>
      <td>0</td>
    </tr>
    <tr>
      <th>105</th>
      <td>although you have been most encouraging in out...</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Load Tensorflow input functions</strong></p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">train_input_fn</span> <span class="o">=</span> <span class="n">train_input_fs</span><span class="p">(</span><span class="n">train</span> <span class="o">=</span> <span class="n">dfs</span><span class="p">[</span><span class="s1">&#39;train&#39;</span><span class="p">])</span>
<span class="n">predict_input_fn</span> <span class="o">=</span>  <span class="n">predict_input_fs</span><span class="p">(</span><span class="o">**</span><span class="n">dfs</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Set-up-the-Model">Set up the Model<a class="anchor-link" href="#Set-up-the-Model"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong><em>Feature columns</em></strong></p>
<p>From TF-Hub <a href="https://github.com/tensorflow/hub/blob/master/docs/api_docs/python/hub/text_embedding_column.md">feature column</a>
we use <a href="https://tfhub.dev/google/nnlm-en-dim128/1">nnlm-en-dim128 module</a>. Some important facts are:</p>
<ul>
<li>The module takes <strong>a batch of sentences in a 1-D tensor of strings</strong> as input.</li>
<li>The module is responsible for <strong>preprocessing of sentences</strong> (e.g. removal of punctuation and splitting on spaces).</li>
<li>The module works with any input (e.g. <strong>nnlm-en-dim128</strong> hashes words not present in vocabulary into ~20.000 buckets).</li>
</ul>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="embedded_text_feature_column_f" class="doc_header"><code>embedded_text_feature_column_f</code><a href="https://github.com/kikejimenez/job_offer_classifier/tree/master/job_offer_classifier/pipeline_classifier.py#L47" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>embedded_text_feature_column_f</code>(<strong><code>module_spec</code></strong>=<em><code>'https://tfhub.dev/google/nnlm-en-dim128/1'</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Load the embedded text feature column. If it's called it for the first time, it may take time to download it (it weights around 500 MB)</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">embedded_text_feature_column</span> <span class="o">=</span> <span class="n">embedded_text_feature_column_f</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong><em>Premade Estimators</em></strong></p>
<p>For classification, we use a premade <a href="https://www.tensorflow.org/api_docs/python/tf/estimator/DNNClassifier">DNN Classifier</a></p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="load_estimator" class="doc_header"><code>load_estimator</code><a href="https://github.com/kikejimenez/job_offer_classifier/tree/master/job_offer_classifier/pipeline_classifier.py#L53" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>load_estimator</code>(<strong><code>embedded_text_feature_column</code></strong>, <strong><code>estimator</code></strong>=<em><code>'DNNClassifierV2'</code></em>, <strong><code>model_dir</code></strong>=<em><code>None</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">estimator</span> <span class="o">=</span> <span class="n">load_estimator</span><span class="p">(</span><span class="n">embedded_text_feature_column</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The estimator is stored in a temporary file and will be erased unless explicitly exported it (see <a href="/job_offer_classifier/pipeline_classifier#export_estimator"><code>export_estimator</code></a> function).</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Train,-Evaluate-and-Predict">Train, Evaluate and Predict<a class="anchor-link" href="#Train,-Evaluate-and-Predict"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Train the estimator for a reasonable amount of steps.<br>
 Training for 5,000 steps means 640,000 training examples with the default
 batch size (128).<br>
 This is roughly equivalent to 640,000/363 ~ 1700 epochs since the training dataset
 contains 363 examples.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="train" class="doc_header"><code>train</code><a href="https://github.com/kikejimenez/job_offer_classifier/tree/master/job_offer_classifier/pipeline_classifier.py#L65" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>train</code>(<strong><code>estimator</code></strong>, <strong><code>train_input_fn</code></strong>, <strong><code>steps</code></strong>=<em><code>5000</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">train</span><span class="p">(</span><span class="n">estimator</span><span class="p">,</span><span class="n">train_input_fn</span><span class="p">,</span><span class="n">steps</span><span class="o">=</span><span class="mi">5000</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;train&#39;: &lt;tensorflow_estimator.python.estimator.canned.dnn.DNNClassifierV2 at 0x7fd39f3e2550&gt;}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The F1 score is not included in <code>tf.estimator.evaluate</code>. The function <a href="/job_offer_classifier/pipeline_classifier#f1_score"><code>f1_score</code></a>, calculates the F1 score from the precision and recall. The function <a href="/job_offer_classifier/pipeline_classifier#evaluate"><code>evaluate</code></a> adds to  <code>tf.estimator.evaluate</code> the  <a href="/job_offer_classifier/pipeline_classifier#f1_score"><code>f1_score</code></a> and is acting over the input functions.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="f1_score" class="doc_header"><code>f1_score</code><a href="https://github.com/kikejimenez/job_offer_classifier/tree/master/job_offer_classifier/pipeline_classifier.py#L72" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>f1_score</code>(<strong><code>estimations</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="evaluate" class="doc_header"><code>evaluate</code><a href="https://github.com/kikejimenez/job_offer_classifier/tree/master/job_offer_classifier/pipeline_classifier.py#L78" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>evaluate</code>(<strong><code>estimator</code></strong>, <strong>**<code>args</code></strong>:<a href="/job_offer_classifier/pipeline_classifier#tf_input_fn"><code>tf_input_fn</code></a>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The <a href="/job_offer_classifier/pipeline_classifier#predict"><code>predict</code></a> function, takes a dataframe of payloads in give the corresponding prediction</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="predict" class="doc_header"><code>predict</code><a href="https://github.com/kikejimenez/job_offer_classifier/tree/master/job_offer_classifier/pipeline_classifier.py#L86" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>predict</code>(<strong><code>estimator</code></strong>, <strong><code>df_examples</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Evaluate:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">eval_results</span> <span class="o">=</span> <span class="n">evaluate</span><span class="p">(</span><span class="n">estimator</span><span class="p">,</span><span class="o">**</span><span class="n">predict_input_fn</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Training set accuracy: </span><span class="si">{accuracy}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">eval_results</span><span class="p">[</span><span class="s1">&#39;train&#39;</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Test set accuracy: </span><span class="si">{accuracy}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">eval_results</span><span class="p">[</span><span class="s1">&#39;test&#39;</span><span class="p">]))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Training set accuracy: 0.9935275316238403
Test set accuracy: 0.9444444179534912
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Predict:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">predict</span><span class="p">(</span><span class="n">estimator</span><span class="p">,</span> <span class="n">dfs</span><span class="p">[</span><span class="s1">&#39;test&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span> 
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>array([1, 1, 1, 1, 1])</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>It is desirable a function that takes directly a string and assesses if it represents a  positive or negative sentiment. The function <a href="/job_offer_classifier/pipeline_classifier#sentiment"><code>sentiment</code></a> covers this role.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="sentiment" class="doc_header"><code>sentiment</code><a href="https://github.com/kikejimenez/job_offer_classifier/tree/master/job_offer_classifier/pipeline_classifier.py#L101" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>sentiment</code>(<strong><code>estimator</code></strong>, <strong><code>doc</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">example_str</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39; thank you for offering me the position of Merchandiser with Thomas Ltd.</span>
<span class="s1">i am thankful to accept this job offer and look ahead to starting my career with your company</span>
<span class="s1">on June 27, 2000.&#39;&#39;&#39;</span>
<span class="n">sentiment</span><span class="p">(</span><span class="n">estimator</span><span class="p">,</span><span class="n">example_str</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;positive&#39;</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong><em>Confusion matrix</em></strong><br>
The function <a href="/job_offer_classifier/pipeline_classifier#plot_confusion_matrix"><code>plot_confusion_matrix</code></a> plots the corresponding confusion matrix over dataframe and its corresponding TF function. Confusion matrix helps  to understand the distribution of misclassifications.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="plot_confusion_matrix" class="doc_header"><code>plot_confusion_matrix</code><a href="https://github.com/kikejimenez/job_offer_classifier/tree/master/job_offer_classifier/pipeline_classifier.py#L107" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>plot_confusion_matrix</code>(<strong><code>df_data</code></strong>, <strong><code>estimator</code></strong>, <strong><code>input_fn</code></strong>, <strong><code>header</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The Confusion Matrix on the Train Set</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">plot_confusion_matrix</span><span class="p">(</span><span class="n">dfs</span><span class="p">[</span><span class="s1">&#39;train&#39;</span><span class="p">],</span><span class="n">estimator</span><span class="p">,</span><span class="n">predict_input_fn</span><span class="p">[</span><span class="s1">&#39;train&#39;</span><span class="p">],</span><span class="n">header</span><span class="o">=</span><span class="s1">&#39;Train data&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
"
>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The Confusion Matrix on the Test Set</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">plot_confusion_matrix</span><span class="p">(</span><span class="n">dfs</span><span class="p">[</span><span class="s1">&#39;test&#39;</span><span class="p">],</span><span class="n">estimator</span><span class="p">,</span><span class="n">predict_input_fn</span><span class="p">[</span><span class="s1">&#39;test&#39;</span><span class="p">],</span><span class="n">header</span><span class="o">=</span><span class="s1">&#39;Test data&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
"
>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Save-and-Load-an-Estimator">Save and Load an Estimator<a class="anchor-link" href="#Save-and-Load-an-Estimator"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The  <a href="/job_offer_classifier/pipeline_classifier#export_estimator"><code>export_estimator</code></a> function copy the directory of the estimador given in <code>estimator.model_dir</code> to a <em>dst_model</em>.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="export_estimator" class="doc_header"><code>export_estimator</code><a href="https://github.com/kikejimenez/job_offer_classifier/tree/master/job_offer_classifier/pipeline_classifier.py#L128" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>export_estimator</code>(<strong><code>estimator</code></strong>, <strong><code>dst_estimator</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Load the saved estimator using <code>load_model</code> and check that the evaluation results are up to date with latest check point:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">with</span> <span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">tmpdirname</span><span class="p">:</span>
    <span class="n">tmp_dir</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdirname</span><span class="p">,</span><span class="s1">&#39;tmp&#39;</span><span class="p">)</span>
    <span class="n">export_estimator</span><span class="p">(</span><span class="n">estimator</span><span class="p">,</span><span class="n">dst_estimator</span> <span class="o">=</span> <span class="n">tmp_dir</span><span class="p">)</span>
    <span class="n">loaded_estimator_results</span> <span class="o">=</span> <span class="n">evaluate</span><span class="p">(</span><span class="n">load_estimator</span><span class="p">(</span><span class="n">embedded_text_feature_column</span><span class="p">,</span><span class="n">model_dir</span><span class="o">=</span><span class="n">tmp_dir</span><span class="p">),</span><span class="o">**</span><span class="n">predict_input_fn</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="n">loaded_estimator_results</span> <span class="o">==</span> <span class="n">eval_results</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">del</span> <span class="n">dfs</span><span class="p">,</span><span class="n">estimator</span><span class="p">,</span> <span class="n">eval_results</span><span class="p">,</span> <span class="n">embedded_text_feature_column</span><span class="p">,</span> <span class="n">loaded_estimator_results</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="Pipeline" class="doc_header"><code>class</code> <code>Pipeline</code><a href="https://github.com/kikejimenez/job_offer_classifier/tree/master/job_offer_classifier/pipeline_classifier.py#L132" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Pipeline</code>(<strong><code>src_file</code></strong>, <strong><code>estimator_dir</code></strong>=<em><code>None</code></em>, <strong><code>frac</code></strong>=<em><code>0.85</code></em>)</p>
</blockquote>
<p>Class that implements the previous functions as their methods and has a new addtional method <code>pipeline</code>.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The <code>pipeline</code> calls the functions that prepares the input data, trains the model and stores the results of the evaluation</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="Pipeline.pipeline" class="doc_header"><code>Pipeline.pipeline</code><a href="https://github.com/kikejimenez/job_offer_classifier/tree/master/job_offer_classifier/pipeline_classifier.py#L185" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>Pipeline.pipeline</code>()</p>
</blockquote>
<p>The pipeline flow is:
input_fns --&gt; load_estimator --&gt; train --&gt; evaluate</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Check that all methods are implemented correctly</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>First call the pipeline method</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pipeline</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">(</span><span class="n">src_file</span><span class="o">=</span> <span class="s1">&#39;../data/interim/payloads.csv&#39;</span><span class="p">)</span>
<span class="n">pipeline</span><span class="o">.</span><span class="n">pipeline</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The resulting evaluation is stored in <code>pipeline.evaluation</code></p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pipeline</span><span class="o">.</span><span class="n">evaluation</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>dict_keys([&#39;train&#39;, &#39;test&#39;])</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pipeline</span><span class="o">.</span><span class="n">evaluation</span><span class="p">[</span><span class="s1">&#39;test&#39;</span><span class="p">]</span>    
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;accuracy&#39;: 0.8630137,
 &#39;accuracy_baseline&#39;: 0.79452056,
 &#39;auc&#39;: 0.9597701,
 &#39;auc_precision_recall&#39;: 0.9897229,
 &#39;average_loss&#39;: 0.21598883,
 &#39;label/mean&#39;: 0.79452056,
 &#39;loss&#39;: 0.21598883,
 &#39;precision&#39;: 0.9,
 &#39;prediction/mean&#39;: 0.8155946,
 &#39;recall&#39;: 0.9310345,
 &#39;global_step&#39;: 5000,
 &#39;f1_score&#39;: 0.9152542656778231}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The confusion matrix for train set</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pipeline</span><span class="o">.</span><span class="n">plot_confusion_matrix</span><span class="p">(</span><span class="s1">&#39;train&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
"
>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The confustion matrix for test set</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pipeline</span><span class="o">.</span><span class="n">plot_confusion_matrix</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
"
>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Check that the <a href="/job_offer_classifier/pipeline_classifier#export_estimator"><code>export_estimator</code></a> is rightly copying the model files</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">with</span> <span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">tmpdirname</span><span class="p">:</span>
    <span class="n">tmp_dir</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdirname</span><span class="p">,</span><span class="s1">&#39;tmp&#39;</span><span class="p">)</span>
    <span class="n">pipeline</span><span class="o">.</span><span class="n">export_estimator</span><span class="p">(</span><span class="n">tmp_dir</span><span class="p">)</span>
    
    <span class="k">assert</span> <span class="n">listdir</span><span class="p">(</span><span class="n">tmp_dir</span><span class="p">)</span> <span class="o">==</span> <span class="n">listdir</span><span class="p">(</span><span class="n">pipeline</span><span class="o">.</span><span class="n">estimator</span><span class="o">.</span><span class="n">model_dir</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Predict examples in 0 1 format</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pipeline</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">dat</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>array([1])</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Predict from string</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doc_str</span><span class="o">=</span><span class="s1">&#39;&#39;&#39;thank you very much for offering me the opportunity to work at Norris, Wilson and Kelley as Clinical embryologist.</span><span class="se">\n</span><span class="s1">after much deliberation, i will not be accepting the position,</span>
<span class="s1">as it isn’t the right fit for my long-term career goals.</span><span class="se">\n</span><span class="s1">i sincerely appreciate the offer and give you</span>
<span class="s1">my best wishes in finding a suitable candidate for the position.</span><span class="se">\n</span><span class="s1">i wish you and the company well </span>
<span class="s1">in all future endeavours.&#39;&#39;&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pipeline</span><span class="o">.</span><span class="n">sentiment</span><span class="p">(</span><span class="n">doc_str</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>negative
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

