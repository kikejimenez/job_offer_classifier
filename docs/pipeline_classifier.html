---

title: Pipeline 

keywords: fastai
sidebar: home_sidebar

summary: "The pipeline of text binary classifier for job offer email responses "
description: "The pipeline of text binary classifier for job offer email responses "
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/01_pipeline_classifier.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The dataset of email responses is loaded from a csv file. The data is classified as 'positive' or 'negative' using Tensorflow <code>tf.estimator</code> module.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Data-Processing">Data Processing<a class="anchor-link" href="#Data-Processing"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We have three steps in the data processing pipeline:</p>
<ul>
<li>load data --&gt;  train-test split  --&gt;  TF input functions</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The loading and train-test split is done using the Pandas library. The conversion from a dataframe to a TF function is  necessary.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="load_and_split_data" class="doc_header"><code>load_and_split_data</code><a href="https://github.com/kikejimenez/job_email_classifier/tree/master/job_email_classifier/pipeline_classifier.py#L20" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>load_and_split_data</code>(<strong><code>src_file</code></strong>, <strong><code>frac</code></strong>=<em><code>0.85</code></em>, <strong><code>random_state</code></strong>=<em><code>None</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The Tensorflow input functions for train, test and example datasets are created with the help of v1 tf.estimator library</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="tf_input_fn" class="doc_header"><code>tf_input_fn</code><a href="https://github.com/kikejimenez/job_email_classifier/tree/master/job_email_classifier/pipeline_classifier.py#L30" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>tf_input_fn</code>(<strong><code>df</code></strong>, <strong><code>shuffle</code></strong>=<em><code>False</code></em>, <strong>**<code>args</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="train_input_fs" class="doc_header"><code>train_input_fs</code><a href="https://github.com/kikejimenez/job_email_classifier/tree/master/job_email_classifier/pipeline_classifier.py#L35" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>train_input_fs</code>(<strong>**<code>args</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="predict_input_fs" class="doc_header"><code>predict_input_fs</code><a href="https://github.com/kikejimenez/job_email_classifier/tree/master/job_email_classifier/pipeline_classifier.py#L41" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>predict_input_fs</code>(<strong>**<code>args</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Load and split the dataset</strong></p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dat</span><span class="p">,</span> <span class="n">dfs</span> <span class="o">=</span> <span class="n">load_and_split_data</span><span class="p">(</span><span class="n">src_file</span><span class="o">=</span><span class="s1">&#39;../data/interim/payloads.csv&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Percentage of the positive and negative sentiments</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">=</span><span class="n">dat</span>
<span class="s1">&#39;sentiment: {pos: </span><span class="si">%s</span><span class="s1">, neg: </span><span class="si">%s</span><span class="s1">}&#39;</span> <span class="o">%</span> <span class="p">((</span><span class="n">df</span><span class="o">.</span><span class="n">sentiment</span> <span class="o">==</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">/</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">sentiment</span> <span class="o">==</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">/</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;sentiment: {pos: 0.20110192837465565, neg: 0.7988980716253443}&#39;</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Sample of the train dataset</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dfs</span><span class="p">[</span><span class="s1">&#39;train&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>payload</th>
      <th>sentiment</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>44</th>
      <td>it\nis\nwith\ndeepest\ngratitude\nthat\ni\nam\...</td>
      <td>1</td>
    </tr>
    <tr>
      <th>248</th>
      <td>this letter is to express my interest on your ...</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Load Tensorflow input functions</strong></p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">train_input_fn</span> <span class="o">=</span> <span class="n">train_input_fs</span><span class="p">(</span><span class="n">train</span> <span class="o">=</span> <span class="n">dfs</span><span class="p">[</span><span class="s1">&#39;train&#39;</span><span class="p">])</span>
<span class="n">predict_input_fn</span> <span class="o">=</span>  <span class="n">predict_input_fs</span><span class="p">(</span><span class="o">**</span><span class="n">dfs</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Set-up-the-Model">Set up the Model<a class="anchor-link" href="#Set-up-the-Model"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong><em>Feature columns</em></strong></p>
<p>From TF-Hub <a href="https://github.com/tensorflow/hub/blob/master/docs/api_docs/python/hub/text_embedding_column.md">feature column</a>
we use <a href="https://tfhub.dev/google/nnlm-en-dim128/1">nnlm-en-dim128 module</a>. Some important facts are:</p>
<ul>
<li>The module takes <strong>a batch of sentences in a 1-D tensor of strings</strong> as input.</li>
<li>The module is responsible for <strong>preprocessing of sentences</strong> (e.g. removal of punctuation and splitting on spaces).</li>
<li>The module works with any input (e.g. <strong>nnlm-en-dim128</strong> hashes words not present in vocabulary into ~20.000 buckets).</li>
</ul>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="embedded_text_feature_column_f" class="doc_header"><code>embedded_text_feature_column_f</code><a href="https://github.com/kikejimenez/job_email_classifier/tree/master/job_email_classifier/pipeline_classifier.py#L47" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>embedded_text_feature_column_f</code>(<strong><code>module_spec</code></strong>=<em><code>'https://tfhub.dev/google/nnlm-en-dim128/1'</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Load the embedded text feature column. If it's called it for the first time, it may take time to download it (it weights around 500 MB)</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">embedded_text_feature_column</span> <span class="o">=</span> <span class="n">embedded_text_feature_column_f</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong><em>Premade Estimators</em></strong></p>
<p>For classification, we use a premade <a href="https://www.tensorflow.org/api_docs/python/tf/estimator/DNNClassifier">DNN Classifier</a></p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="load_estimator" class="doc_header"><code>load_estimator</code><a href="https://github.com/kikejimenez/job_email_classifier/tree/master/job_email_classifier/pipeline_classifier.py#L53" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>load_estimator</code>(<strong><code>embedded_text_feature_column</code></strong>, <strong><code>estimator</code></strong>=<em><code>'DNNClassifierV2'</code></em>, <strong><code>model_dir</code></strong>=<em><code>None</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">estimator</span> <span class="o">=</span> <span class="n">load_estimator</span><span class="p">(</span><span class="n">embedded_text_feature_column</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The estimator is stored in a temporary file and will be erased unless explicitly exported it (see <a href="/job_email_classifier/pipeline_classifier#export_estimator"><code>export_estimator</code></a> function).</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Train,-Evaluate-and-Predict">Train, Evaluate and Predict<a class="anchor-link" href="#Train,-Evaluate-and-Predict"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Train the estimator for a reasonable amount of steps.<br>
 Training for 5,000 steps means 640,000 training examples with the default
 batch size (128).<br>
 This is roughly equivalent to 640,000/363 ~ 1700 epochs since the training dataset
 contains 363 examples.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="train" class="doc_header"><code>train</code><a href="https://github.com/kikejimenez/job_email_classifier/tree/master/job_email_classifier/pipeline_classifier.py#L65" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>train</code>(<strong><code>estimator</code></strong>, <strong><code>train_input_fn</code></strong>, <strong><code>steps</code></strong>=<em><code>5000</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">train</span><span class="p">(</span><span class="n">estimator</span><span class="p">,</span><span class="n">train_input_fn</span><span class="p">,</span><span class="n">steps</span><span class="o">=</span><span class="mi">5000</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;train&#39;: &lt;tensorflow_estimator.python.estimator.canned.dnn.DNNClassifierV2 at 0x7f84060b8850&gt;}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The F1 score is not included in <code>tf.estimator.evaluate</code>. The function <a href="/job_email_classifier/pipeline_classifier#f1_score"><code>f1_score</code></a>, calculates the F1 score from the precision and recall. The function <a href="/job_email_classifier/pipeline_classifier#evaluate"><code>evaluate</code></a> adds to  <code>tf.estimator.evaluate</code> the  <a href="/job_email_classifier/pipeline_classifier#f1_score"><code>f1_score</code></a> and is acting over the input functions.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="f1_score" class="doc_header"><code>f1_score</code><a href="https://github.com/kikejimenez/job_email_classifier/tree/master/job_email_classifier/pipeline_classifier.py#L72" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>f1_score</code>(<strong><code>estimations</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="evaluate" class="doc_header"><code>evaluate</code><a href="https://github.com/kikejimenez/job_email_classifier/tree/master/job_email_classifier/pipeline_classifier.py#L78" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>evaluate</code>(<strong><code>estimator</code></strong>, <strong>**<code>args</code></strong>:<a href="/job_email_classifier/pipeline_classifier#tf_input_fn"><code>tf_input_fn</code></a>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The <a href="/job_email_classifier/pipeline_classifier#predict"><code>predict</code></a> function, takes a dataframe of payloads in give the corresponding prediction</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="predict" class="doc_header"><code>predict</code><a href="https://github.com/kikejimenez/job_email_classifier/tree/master/job_email_classifier/pipeline_classifier.py#L86" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>predict</code>(<strong><code>estimator</code></strong>, <strong><code>df_examples</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Evaluate:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">eval_results</span> <span class="o">=</span> <span class="n">evaluate</span><span class="p">(</span><span class="n">estimator</span><span class="p">,</span><span class="o">**</span><span class="n">predict_input_fn</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Training set accuracy: </span><span class="si">{accuracy}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">eval_results</span><span class="p">[</span><span class="s1">&#39;train&#39;</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Test set accuracy: </span><span class="si">{accuracy}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">eval_results</span><span class="p">[</span><span class="s1">&#39;test&#39;</span><span class="p">]))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Training set accuracy: 0.9896551966667175
Test set accuracy: 0.9589040875434875
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Predict:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">predict</span><span class="p">(</span><span class="n">estimator</span><span class="p">,</span> <span class="n">dfs</span><span class="p">[</span><span class="s1">&#39;test&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span> 
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>array([0, 0, 1, 1, 0])</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>It is desirable a function that takes directly a string and assesses if it represents a  positive or negative sentiment. The function <a href="/job_email_classifier/pipeline_classifier#sentiment"><code>sentiment</code></a> covers this role.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="sentiment" class="doc_header"><code>sentiment</code><a href="https://github.com/kikejimenez/job_email_classifier/tree/master/job_email_classifier/pipeline_classifier.py#L101" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>sentiment</code>(<strong><code>estimator</code></strong>, <strong><code>doc</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">example_str</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39; thank you for offering me the position of Merchandiser with Thomas Ltd.</span>
<span class="s1">i am thankful to accept this job offer and look ahead to starting my career with your company</span>
<span class="s1">on June 27, 2000.&#39;&#39;&#39;</span>
<span class="n">sentiment</span><span class="p">(</span><span class="n">estimator</span><span class="p">,</span><span class="n">example_str</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;positive&#39;</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong><em>Confusion matrix</em></strong><br>
The function <a href="/job_email_classifier/pipeline_classifier#plot_confusion_matrix"><code>plot_confusion_matrix</code></a> plots the corresponding confusion matrix over dataframe and its corresponding TF function. Confusion matrix helps  to understand the distribution of misclassifications.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="plot_confusion_matrix" class="doc_header"><code>plot_confusion_matrix</code><a href="https://github.com/kikejimenez/job_email_classifier/tree/master/job_email_classifier/pipeline_classifier.py#L107" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>plot_confusion_matrix</code>(<strong><code>df_data</code></strong>, <strong><code>estimator</code></strong>, <strong><code>input_fn</code></strong>, <strong><code>header</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The Confusion Matrix on the Train Set</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">plot_confusion_matrix</span><span class="p">(</span><span class="n">dfs</span><span class="p">[</span><span class="s1">&#39;train&#39;</span><span class="p">],</span><span class="n">estimator</span><span class="p">,</span><span class="n">predict_input_fn</span><span class="p">[</span><span class="s1">&#39;train&#39;</span><span class="p">],</span><span class="n">header</span><span class="o">=</span><span class="s1">&#39;Train data&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
"
>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The Confusion Matrix on the Test Set</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">plot_confusion_matrix</span><span class="p">(</span><span class="n">dfs</span><span class="p">[</span><span class="s1">&#39;test&#39;</span><span class="p">],</span><span class="n">estimator</span><span class="p">,</span><span class="n">predict_input_fn</span><span class="p">[</span><span class="s1">&#39;test&#39;</span><span class="p">],</span><span class="n">header</span><span class="o">=</span><span class="s1">&#39;Test data&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
"
>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Save-and-Load-an-Estimator">Save and Load an Estimator<a class="anchor-link" href="#Save-and-Load-an-Estimator"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The  <a href="/job_email_classifier/pipeline_classifier#export_estimator"><code>export_estimator</code></a> function copy the directory of the estimador given in <code>estimator.model_dir</code> to a <em>dst_model</em>.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="export_estimator" class="doc_header"><code>export_estimator</code><a href="https://github.com/kikejimenez/job_email_classifier/tree/master/job_email_classifier/pipeline_classifier.py#L128" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>export_estimator</code>(<strong><code>estimator</code></strong>, <strong><code>dst_estimator</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Load the saved estimator using <code>load_model</code> and check that the evaluation results are up to date with latest check point:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">with</span> <span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">tmpdirname</span><span class="p">:</span>
    <span class="n">tmp_dir</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdirname</span><span class="p">,</span><span class="s1">&#39;tmp&#39;</span><span class="p">)</span>
    <span class="n">export_estimator</span><span class="p">(</span><span class="n">estimator</span><span class="p">,</span><span class="n">dst_estimator</span> <span class="o">=</span> <span class="n">tmp_dir</span><span class="p">)</span>
    <span class="n">loaded_estimator_results</span> <span class="o">=</span> <span class="n">evaluate</span><span class="p">(</span><span class="n">load_estimator</span><span class="p">(</span><span class="n">embedded_text_feature_column</span><span class="p">,</span><span class="n">model_dir</span><span class="o">=</span><span class="n">tmp_dir</span><span class="p">),</span><span class="o">**</span><span class="n">predict_input_fn</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="n">loaded_estimator_results</span> <span class="o">==</span> <span class="n">eval_results</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">del</span> <span class="n">dfs</span><span class="p">,</span><span class="n">estimator</span><span class="p">,</span> <span class="n">eval_results</span><span class="p">,</span> <span class="n">embedded_text_feature_column</span><span class="p">,</span> <span class="n">loaded_estimator_results</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="Pipeline" class="doc_header"><code>class</code> <code>Pipeline</code><a href="https://github.com/kikejimenez/job_email_classifier/tree/master/job_email_classifier/pipeline_classifier.py#L132" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Pipeline</code>(<strong><code>src_file</code></strong>, <strong><code>estimator_dir</code></strong>=<em><code>None</code></em>, <strong><code>frac</code></strong>=<em><code>0.85</code></em>)</p>
</blockquote>
<p>Class that implements the previous functions as their methods and has a new addtional method <code>pipeline</code>.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The <code>pipeline</code> calls the functions that prepares the input data, trains the model and stores the results of the evaluation</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="Pipeline.pipeline" class="doc_header"><code>Pipeline.pipeline</code><a href="https://github.com/kikejimenez/job_email_classifier/tree/master/job_email_classifier/pipeline_classifier.py#L185" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>Pipeline.pipeline</code>()</p>
</blockquote>
<p>The pipeline flow is:
input_fns --&gt; load_estimator --&gt; train --&gt; evaluate</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Check that all methods are implemented correctly</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>First call the pipeline method</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pipeline</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">(</span><span class="n">src_file</span><span class="o">=</span> <span class="s1">&#39;../data/interim/payloads.csv&#39;</span><span class="p">)</span>
<span class="n">pipeline</span><span class="o">.</span><span class="n">pipeline</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The resulting evaluation is stored in <code>pipeline.evaluation</code></p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pipeline</span><span class="o">.</span><span class="n">evaluation</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>dict_keys([&#39;train&#39;, &#39;test&#39;])</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pipeline</span><span class="o">.</span><span class="n">evaluation</span><span class="p">[</span><span class="s1">&#39;test&#39;</span><span class="p">]</span>    
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;accuracy&#39;: 0.9726027,
 &#39;accuracy_baseline&#39;: 0.8082192,
 &#39;auc&#39;: 0.98123485,
 &#39;auc_precision_recall&#39;: 0.99523896,
 &#39;average_loss&#39;: 0.11330748,
 &#39;label/mean&#39;: 0.8082192,
 &#39;loss&#39;: 0.11330748,
 &#39;precision&#39;: 0.9830508,
 &#39;prediction/mean&#39;: 0.8049556,
 &#39;recall&#39;: 0.9830508,
 &#39;global_step&#39;: 5000,
 &#39;f1_score&#39;: 0.9830508232116699}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The confusion matrix for train set</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pipeline</span><span class="o">.</span><span class="n">plot_confusion_matrix</span><span class="p">(</span><span class="s1">&#39;train&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
"
>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The confustion matrix for test set</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pipeline</span><span class="o">.</span><span class="n">plot_confusion_matrix</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
"
>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Check that the <a href="/job_email_classifier/pipeline_classifier#export_estimator"><code>export_estimator</code></a> is rightly copying the model files</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">with</span> <span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">tmpdirname</span><span class="p">:</span>
    <span class="n">tmp_dir</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdirname</span><span class="p">,</span><span class="s1">&#39;tmp&#39;</span><span class="p">)</span>
    <span class="n">pipeline</span><span class="o">.</span><span class="n">export_estimator</span><span class="p">(</span><span class="n">tmp_dir</span><span class="p">)</span>
    
    <span class="k">assert</span> <span class="n">listdir</span><span class="p">(</span><span class="n">tmp_dir</span><span class="p">)</span> <span class="o">==</span> <span class="n">listdir</span><span class="p">(</span><span class="n">pipeline</span><span class="o">.</span><span class="n">estimator</span><span class="o">.</span><span class="n">model_dir</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Predict examples in 0 1 format</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pipeline</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">dat</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>array([0])</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Predict from string</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doc_str</span><span class="o">=</span><span class="s1">&#39;&#39;&#39;thank you very much for offering me the opportunity to work at Norris, Wilson and Kelley as Clinical embryologist.</span><span class="se">\n</span><span class="s1">after much deliberation, i will not be accepting the position,</span>
<span class="s1">as it isnt the right fit for my long-term career goals.</span><span class="se">\n</span><span class="s1">i sincerely appreciate the offer and give you</span>
<span class="s1">my best wishes in finding a suitable candidate for the position.</span><span class="se">\n</span><span class="s1">i wish you and the company well </span>
<span class="s1">in all future endeavours.&#39;&#39;&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pipeline</span><span class="o">.</span><span class="n">sentiment</span><span class="p">(</span><span class="n">doc_str</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>negative
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

